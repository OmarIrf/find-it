<!DOCTYPE html>
<html>

<head>
    <title>FindIt Chatroom</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>

<body>
    <a href="{{ url_for('routes.index') }}">
        <button style="margin-bottom: 10px;">← Back to Home</button>
    </a>
    <h1>Welcome to the FindIt Chatroom, {{ username }}!</h1>

    <form id="chat-form">
        <input type="text" id="message" placeholder="Type your message..." autocomplete="off" required>
        <button type="submit">Send</button>
    </form>

    <div id="messages"></div>

    <ul id="found-items" style="display: none;">
        <li>Brown Jacket — Found at Library</li>
        <li>Black Jacket — Found at Library</li>
        <li>AirPods — Found in the Cafeteria</li>
        <li>White Iphone — Found near the Gym</li>
        <li>Black Headphones — Found near the Gym</li>
        <li>White Airpods — Found near the Gym</li>
        <li>Black Android — Found near the Gym</li>
        <li>White Samsung — Found near the Gym</li>
        <li>White Iphone — Found near the Library</li>
        <li>White purse — Found near the Gym</li>
        <li>Black Iphone — Found near the Gym</li>
        <li>Fuzzy Wallet — Found in Cafeteria</li>
        <li>Blue Wallet — Found in Cafeteria</li>
        <li>Orange Wallet — Found in Cafeteria</li>
        <li>Green Wallet — Found near the fountain</li>
        <li>Purple Wallet — Found near the fountain</li>
        <li>Pink Wallet — Found near the fountain</li>
        <li>Black Flask — Found in Hallway</li>
        <li>Red Flask — Found in Hallway</li>
        <li>Yellow Flask — Found in Hallway</li>
        <li>Black Car Keys — Found on the Ground</li>
        <li>White Car Keys — Found on the Ground</li>
        <li>BMW Car Keys — Found on the Ground</li>
        <li>Honda Car Keys — Found on the Ground</li>
        <li>Hyundai Car Keys — Found on the Ground</li>
        <li>Toyota Car Keys — Found on the Ground</li>
        <li>Hellcat Car Keys — Found on the Ground</li>
        <li>Mercedes Car Keys — Found on the Ground</li>
        <li>Ford Car Keys — Found on the Ground</li>
        <li>White iPhone — Found in Computer Lab</li>
        <li>Samsung Galaxy — Found on Library Desk</li>
        <li>AirPods — Found in Study Room 3</li>
        <li>Smartwatch — Found in Men's Locker Room</li>
        <li>HP Laptop — Found in Classroom 204</li>
        <li>USB Drive — Found plugged into Lab Computer</li>
        <li>Brown Leather Wallet — Found in Parking Garage Elevator</li>
        <li>Coach Wallet — Found near Library Restrooms</li>
        <li>Black Backpack — Found in the Courtyard</li>
        <li>Grey Backpack — Found outside Engineering Building</li>
        <li>Navy Blue Tote Bag — Found in Women's Restroom (Cafeteria)</li>
        <li>Beats Headphones — Found on Gym Bench</li>
        <li>Ray-Ban Sunglasses — Found in Garden Walkway</li>
        <li>Prescription Glasses — Found on Science Lab Table</li>
        <li>Reading Glasses — Found in Campus Bookstore</li>
        <li>Red Hoodie — Found on Library Chair</li>
        <li>North Face Jacket — Found in Math Hallway</li>
        <li>Blue Water Bottle — Found near Soccer Field</li>
        <li>Sketchbook — Found in Art Studio</li>
        <li>Student ID Card — Found at Starbucks Counter</li>
        <li>iPad Pro — Found in Science Building</li>
        <li>MacBook Charger — Found in Lecture Hall 3</li>
        <li>Lenovo Laptop — Found in Library Study Booth</li>
        <li>Android Tablet — Found in the Cafeteria Charging Station</li>
        <li>Wireless Mouse — Found in Business Building Lab</li>
        <li>Bluetooth Speaker — Found near Dorm A Courtyard</li>
        <li>Kindle — Found at Library Front Desk</li>
        <li>iPhone 13 Case — Found outside Tech Building</li>
        <li>VR Headset — Found in Gaming Club Room</li>
        <li>iPhone Stylus — Found in Art Hall</li>
        <li>Teal Wallet — Found in Counseling Office</li>
        <li>Burberry Wallet — Found near Financial Aid Window</li>
        <li>Yellow Purse — Found outside Music Hall</li>
        <li>Levi's Backpack — Found in Locker Room</li>
        <li>Messenger Bag — Found in History Department</li>
        <li>Small Drawstring Bag — Found behind Gym Bleachers</li>
        <li>Mini Backpack (Pink) — Found in Library Lost & Found</li>
        <li>Black Gym Bag — Found in Weight Room</li>
        <li>Adidas Bag — Found near Running Track</li>
        <li>Rolling Laptop Bag — Found near Admin Office</li>
        <li>Denim Jacket — Found outside Building C</li>
        <li>Beanie Hat — Found in Dorm Hallway</li>
        <li>Umbrella — Found at East Entrance</li>
        <li>Scarf — Found in Chemistry Lab</li>
        <li>Black Gloves — Found near Bus Stop</li>
        <li>Pink Crocs — Found near Pool Area</li>
        <li>Soccer Cleats — Found outside Fieldhouse</li>
        <li>Graduation Cap — Found in Auditorium</li>
        <li>Campus Lanyard — Found in Student Union</li>
        <li>Green Windbreaker — Found on Track Field Bench</li>
        <li>Calculus Textbook — Found in Building A Lounge</li>
        <li>Chemistry Notebook — Found near Lab Sink</li>
        <li>Engineering Graph Paper Pad — Found in Lecture Hall</li>
        <li>3-Ring Binder — Found in Music Practice Room</li>
        <li>Loose Notes Folder — Found in Art Hallway</li>
        <li>Pen Pouch — Found in Writing Center</li>
        <li>TI-84 Calculator — Found in Math Lab</li>
        <li>Sticky Notes Pack — Found at Library Printer Station</li>
        <li>Whiteboard Markers — Found in Study Room 6</li>
        <li>Bullet Journal — Found in Wellness Center</li>
        <li>Reusable Coffee Cup — Found at Library Cafe</li>
        <li>Hydro Flask (Teal) — Found near Main Stairs</li>
        <li>Grocery Bag — Found in Dorm Kitchen</li>
        <li>Reusable Lunch Box — Found outside Food Court</li>
        <li>Pack of Protein Bars — Found in Gym Locker</li>
        <li>Snack Bag — Found in Art Supply Closet</li>
        <li>Earplugs — Found in Meditation Room</li>
        <li>Yoga Mat — Found outside Fitness Studio</li>
        <li>Pepper Spray Keychain — Found near Parking Lot C</li>
        <li>Mini First-Aid Kit — Found in Campus Restroom</li>
        <li>Calculator — Found on 2nd Floor of Library</li>
        <li>Red Notebook — Found in Language Arts Building</li>
        <li>Black Gloves — Found in Parking Garage Stairwell</li>
        <li>Pink Pencil Case — Found in Biology Lab</li>
        <li>Apple Watch — Found in Gym Locker #12</li>
        <li>Leather Belt — Found in Men's Restroom (Main Hall)</li>
        <li>Makeup Bag — Found in Theater Dressing Room</li>
        <li>Tripod — Found near Campus Newsroom</li>
        <li>Sketchpad — Found on Bench outside Art Building</li>
        <li>Green Water Bottle — Found by Tennis Courts</li>
        <li>Biology Textbook — Found in Lecture Hall 2B</li>
        <li>Earbuds — Found near Cafeteria Exit</li>
        <li>Planner — Found in Academic Advising Office</li>
        <li>Umbrella — Found outside Student Union</li>
        <li>Black Binder — Found in Engineering Study Zone</li>
        <li>Wallet Chain — Found in Game Room</li>
        <li>Bluetooth Earbuds Case — Found in Music Practice Room</li>
        <li>Silver Ring — Found in Women's Restroom (Science Building)</li>
        <li>Grey Hoodie — Found on Bench near Bookstore</li>
        <li>Reusable Grocery Bag — Found in Dorm Laundry Room</li>
    </ul>


    <script>
        const socket = io();

        document.getElementById('chat-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const msg = document.getElementById('message').value;
            socket.emit('message', msg);
            document.getElementById('message').value = '';
        });

        
        socket.on('message', function (msg) {
    const itemPhrases = [
        "black jacket", "red flask", "yellow flask", "blue water bottle", "green water bottle",
        "ti calculator", "chromebook", "laptop", "macbook", "usb drive", "tablet", "charger",
        "notebook", "journal", "planner", "spiral notebook", "textbook",
        "wallet", "id card", "student id", "pencil case", "keychain", "keys",
        "glasses", "umbrella", "flash drive", "watch", "locker key", "backpack", "tote bag",
        "toyota car keys", "bluetooth earbuds case", "white iphone"
    ];

    const locationPhrases = [
        "library", "hallway", "cafeteria", "gym", "math hallway",
        "building c", "student center", "parking lot", "classroom", "bench",
        "music practice room"
    ];

    let itemMatch = null;
    let locationMatch = null;

    const msgLower = msg.toLowerCase();

    itemPhrases.forEach(phrase => {
        if (msgLower.includes(phrase)) {
            itemMatch = phrase;
        }
    });

    locationPhrases.forEach(phrase => {
        if (msgLower.includes(phrase)) {
            locationMatch = phrase;
        }
    });

    let reply = "";
    if (itemMatch && locationMatch) {
        const foundItems = document.querySelectorAll('#found-items li');
        const matchingItems = [];

        foundItems.forEach(item => {
            const text = item.textContent.toLowerCase();
            if (text.includes(itemMatch) && text.includes(locationMatch)) {
                matchingItems.push(item.textContent);
            }
        });

        if (matchingItems.length > 0) {
            reply = "Here’s what I found that might match:<br>" + matchingItems.join("<br>");
        } else {
            reply = "Sorry, I couldn’t find anything like that. You can report your lost item using the form.";
        }
    } else {
        reply = "Sorry, I couldn’t find anything like that. You can report your lost item using the form.";
    }
    
    const messagesDiv = document.getElementById('messages');
    messagesDiv.innerHTML += '<p class="user-msg"><strong>You:</strong> ' + msg + '</p>';
    messagesDiv.innerHTML += '<p class="bot-msg"><strong>Bot:</strong> ' + reply + '</p>';
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
});
</script>


    
</body>

</html>
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background: #f2f2f2;
        padding: 20px;
    }

    h1 {
        text-align: center;
    }

    #chat-form {
        display: flex;
        justify-content: center;
        margin-bottom: 10px;
    }

    #message {
        flex: 1;
        padding: 10px;
        font-size: 16px;
    }

    #messages {
        max-height: 400px;
        overflow-y: auto;
        padding: 10px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #messages p {
        padding: 5px 10px;
        border-radius: 5px;
        background: #e6f7ff;
        margin: 5px 0;
    }
</style>